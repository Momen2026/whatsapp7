import fetch from 'node-fetch';

export const krakenHandler = async (m, { Exp, text }) => {
    if (!text) return m.reply('๐จ ูุฑุฌู ุฅุฑุณุงู ุฑุงุจุท ููุฏูู ุตุงูุญ ูู KrakenFiles!');

    try {
        if (!text.includes('/video/uploads/')) {
            return m.reply('โ ุงูุฑุงุจุท ุงููุฑุณู ููุณ ุฑุงุจุท ููุฏูู ูุจุงุดุฑ!');
        }

        // ุฅุฑุณุงู ุงูููุฏูู ุฅูู ูุงุชุณุงุจ
        let caption = '๐ฌ *ุชู ุงูุชุญููู ุจูุฌุงุญ!*';
        
        await Exp.sendMessage(m.chat, {
            video: { url: text },
            caption: caption
        }, { quoted: m });

        // ููุง ูููู ุฅุถุงูุฉ ุฃู ุนูููุฉ ูุญุฐู ุงูููู ูู ุงูุงุณุชุถุงูุฉ ุจุนุฏ ุงูุฅุฑุณุงู ุฅุฐุง ูุงูุช ุงูุฎุฏูุฉ ุชุฏุนู ุงูุญุฐู ุนุจุฑ API
        // ูุซูุง ูู ูุงูุช KrakenFiles ุชุฏุนู ุงูุญุฐู ุนุจุฑ APIุ ุณุชุญุชุงุฌ ุฅูู ุงุณุชุฎุฏุงู ุงูููุฏ ุงูููุงุณุจ ูุญุฐู ุงูููุฏูู ุจุนุฏ ุงูุฅุฑุณุงู
        // ูุซุงู (ุงูุชุฑุงุถูุง ุฃูู ููุฌุฏ API ููุญุฐู):
        // await fetch(`https://krakenfiles.com/api/delete/${fileId}`, { method: 'DELETE' });

        // ูู ุญุงู ูู ููู ููุงู APIุ ูููู ุฃู ุชุทูุจ ูู ุงููุณุชุฎุฏู ุฃู ูุชุฃูุฏ ูู ุญุฐู ุงูููุฏูู ูุฏูููุง
        m.reply('โ๏ธ ูุฌุจ ุนููู ุญุฐู ุงูููุฏูู ูู ุงูุงุณุชุถุงูุฉ ุฅุฐุง ูุงูุช ุงูุฎุฏูุฉ ูุง ุชุฏุนู ุงูุญุฐู ุงูุชููุงุฆู.');

    } catch (error) {
        console.error(error);
        m.reply('โ๏ธ ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุฅุฑุณุงู ุงูููุฏูู.');
    }
};
